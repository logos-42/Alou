# MCP Host Improved - 智能MCP管理平台

让不懂技术的人也能轻松使用MCP服务！

## 功能特点

1. **智能理解需求** - 使用AI深度分析您的需求
2. **快速搜索服务** - 本地知识库 + npm快速搜索
3. **一键安装配置** - 自动安装依赖和配置
4. **智能创建服务** - 根据需求生成定制的MCP服务

## 快速开始

```bash
python mcp_host_improved.py
```

## 使用示例

### 1. 搜索并创建天气服务
```
🎤 您: 我需要查天气的工具

# 系统会：
# - 在本地知识库中找到天气服务
# - 提供安装现有包或创建定制服务的选项
# - 自动生成代码并安装依赖
```

### 2. 创建地铁查询服务
```
🎤 您: 地铁

# 系统会：
# - 识别出您需要地铁相关服务
# - 快速搜索相关包（5秒内）
# - 如果没找到，自动创建定制的地铁MCP服务
```

### 3. 安装特定包
```
🎤 您: 安装 @modelcontextprotocol/server-filesystem

# 系统会：
# - 直接安装指定的包
# - 自动安装相关依赖
# - 创建启动脚本和配置
```

## 工作流程

1. **理解需求** - AI分析您的输入，理解真实意图
2. **快速匹配** - 先查本地知识库，再搜索npm（限时5秒）
3. **智能决策** - 根据搜索结果决定安装或创建
4. **自动执行** - 安装依赖、生成代码、创建配置

## 本地知识库

系统内置了常见服务类型的知识：

- **天气服务** - 天气查询、预报
- **翻译服务** - 多语言翻译
- **地图服务** - 地图显示、定位、路线
- **地铁服务** - 地铁线路、站点查询
- **数据库服务** - 数据存储和查询
- **文件服务** - 文件系统操作

## 生成的文件结构

```
mcp_workspace/
├── installed/          # 安装的MCP服务
│   └── package_name/
│       ├── package.json
│       ├── start.js    # 启动脚本
│       └── mcp-config.json
└── created/           # 创建的MCP服务
    └── mcp-project/
        ├── package.json
        ├── index.js     # 主程序
        ├── README.md
        └── .env.example
```

## 配置到Cursor

生成的服务可以直接添加到 `mcp.json`:

```json
{
    "your-service": {
        "command": "node",
        "args": ["path/to/index.js"]
    }
}
```

## 注意事项

1. 需要先安装Node.js
2. 搜索超时设置为5秒，避免长时间等待
3. 优先使用本地知识库，更快速准确
4. 所有操作都有超时保护，失败会自动转向创建

## 常见问题

**Q: 搜索总是超时怎么办？**
A: 系统会自动转向创建功能，为您生成定制的MCP服务。

**Q: 如何添加更多服务类型？**
A: 可以编辑 `_check_local_knowledge` 方法中的知识库。

**Q: 生成的服务如何使用？**
A: 每个服务都有README文件说明使用方法，也可以查看生成的配置文件。 